{
  "resolvedId": "F:/workSpace2024/knowledge-nuxt3/components/customer.vue?vue&type=script&setup=true&lang.ts",
  "transforms": [
    {
      "name": "vite:vue",
      "result": "import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, isRef as _isRef, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-874f0d2b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/human1.svg\" }, null, -1))\nconst _hoisted_3 = [\n  _hoisted_2\n]\nconst _hoisted_4 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"card-item call-phone\\\" data-v-874f0d2b><img src=\\\"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/24gf-phoneLoudspeaker.svg\\\" data-v-874f0d2b><div class=\\\"phone-number\\\" data-v-874f0d2b><p data-v-874f0d2b>热线服务</p><h1 data-v-874f0d2b>4008786861</h1></div></div><div class=\\\"card-line\\\" data-v-874f0d2b></div><div class=\\\"card-item contact\\\" data-v-874f0d2b><img src=\\\"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/message.svg\\\" data-v-874f0d2b><p data-v-874f0d2b>在线沟通:</p><a href=\\\"https://work.weixin.qq.com/kfid/kfc074a672e3be7ec8a\\\" target=\\\"_blank\\\" class=\\\"contact-button\\\" data-v-874f0d2b> 立即联系 </a></div><div class=\\\"card-line\\\" data-v-874f0d2b></div>\", 4)\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"在线线留言咨询\", -1))\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/right-arrow.svg\" }, null, -1))\nconst _hoisted_10 = [\n  _hoisted_8,\n  _hoisted_9\n]\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"noshow-card\" }, null, -1))\nconst _hoisted_12 = { class: \"windows-header\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"chat-logo-container\" }, [\n  /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/20231019165013.png\" }),\n  /*#__PURE__*/_createElementVNode(\"div\", { class: \"welcome\" }, [\n    /*#__PURE__*/_createElementVNode(\"h1\", null, \"Hi,您好\"),\n    /*#__PURE__*/_createElementVNode(\"p\", null, \"很高兴很为您服务，服务热线：4008786861\")\n  ])\n], -1))\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"close-line\" }, null, -1))\nconst _hoisted_15 = [\n  _hoisted_14\n]\nconst _hoisted_16 = { class: \"message-item\" }\nconst _hoisted_17 = [\"innerHTML\"]\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/cust2.png\" }, null, -1))\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/ServiceLogo.png\" }, null, -1))\nconst _hoisted_20 = [\"innerHTML\"]\nconst _hoisted_21 = { class: \"message-send-container\" }\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"service-level-container\" }, [\n  /*#__PURE__*/_createElementVNode(\"div\", { class: \"human-service\" }, [\n    /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/human-service.svg\" }),\n    /*#__PURE__*/_createElementVNode(\"a\", {\n      href: \"https://work.weixin.qq.com/kfid/kfc074a672e3be7ec8a\",\n      target: \"_blank\"\n    }, \"转人工\")\n  ])\n], -1))\nconst _hoisted_23 = { class: \"message-container\" }\nconst _hoisted_24 = { class: \"send-message-button-container\" }\n\nimport {useRoute, useRouter} from \"vue-router\";\r\nimport {ref, watch, nextTick, onMounted} from \"vue\";\r\nimport {chat} from \"../assets/libs/gpt\";\r\nimport type {ChatMessage} from \"../assets/types\";\r\nimport cryptoJS from \"crypto-js\";\r\nimport keywordsList from \"../assets/js/keywordsChat/keywordsList\";\r\nimport keywordsArray from \"../assets/js/keywordsChat/keywordsArray\";\r\n\r\nimport { md } from \"../assets/libs/markdown\";\r\nconst similarThreshold = 0.75; // 设置相似度阈值\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'customer',\n  setup(__props) {\n\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nfunction gotoTargetPage(){\r\n\r\n}\r\n\r\nfunction isStringAllSpaces(inputString) {\r\n  // 使用trim()方法去掉字符串两端的空格，然后检查结果是否为空字符串\r\n  return inputString.trim() === '';\r\n}\r\n\r\nfunction getAvailableButton(){\r\n  if (isStringAllSpaces(messageContent.value) ||messageContent.value.length===0 || isTalking===true ){\r\n    messageContent.value ='';\r\n    return false;\r\n  }else {\r\n    return true\r\n  }\r\n}\r\n\r\n\r\n\r\nconst whiteList = ref([\"/login\", \"/reset-password\",\"/sign-up\"]); // 不需要渲染的名单\r\n\r\n/*let apiKey = \"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\";*/\r\n/*let apiKey = \"sk-VcsMNS2JQziQbWaFdmRvHBVqzIH0Ph6QNLN5a1X8QdaemMQ7\";*/\r\n\r\n\r\nlet apiKey = \"sk-VcsMNS2JQziQbWaFdmRvHBVqzIH0Ph6QNLN5a1X8QdaemMQ7\";\r\n\r\nlet isConfig = ref(true);\r\nlet isTalking = ref(false);\r\nconst isMouseOver = ref(false)\r\nlet messageContent = ref(\"\");\r\n\r\nconst isShowChatWindows = ref(false)\r\nfunction getHtml(content){\r\n  let html = md.render(content).replace(/<li>/g, `<li style='opacity: 1;margin-left:15px'> `)\r\n  return html.replace(/<p>.*?<img.*?<\\/p>/g, (match: string) => {\r\n    return match.replace(/<img/g, '<img style=\"max-width: 200px; max-height: 200px\"')\r\n  });\r\n}\r\n\r\nconst decoder = new TextDecoder(\"utf-8\");\r\nconst roleAlias = { user: \"ME\", assistant: \"ChatGPT\", system: \"System\" };\r\nlet keywords = keywordsArray.keywordsArrayList; // 添加你的关键词\r\nconst messageList = ref<ChatMessage[]>([\r\n  /*调教 将chatGPT带入角色*/\r\n  {\r\n    role: \"system\",\r\n    content: \"你是深圳市全德视讯科技有限公司的智能客服名字是全德英文名字是Tentech,你是公司的员工不要用'他们'这样的词，要用我们或者我们公司，\" +\r\n        \"你职责是：\" +\r\n        \"1.提供产品信息和支持：回答客户关于公司产品的问题，提供详细的产品信息和技术支持。包括产品功能、规格、价格、可用性等方面的咨询。\" +\r\n        \"2.解决问题和投诉：协助客户解决产品使用中遇到的问题，处理客户的投诉和问题，确保客户满意。\" +\r\n        \"3.提供培训和指导：为客户提供关于产品的培训和指导，以确保他们能够有效地使用产品。包括编写和维护用户手册、视频教程等。\" +\r\n        \"4.技术支持：为客户提供技术支持，协助解决与产品相关的技术问题。包括与工程团队合作解决更复杂的技术问题。\" +\r\n        \"公司的主营产品是:LED显示屏\" +\r\n        \"公司地址:深圳市光明区玉塘街道田寮社区第五工业区14栋2楼A\" +\r\n        \"公司邮箱: flamehu@tentech-leddisplay.com\"+\r\n        \"公司电话:+86-15818643042\"+\r\n        \"主营:：国内贸易、货物及技术进出口，许可经营项目是：电子产品、LED显示屏、发光二极管、大屏幕显示设备、航空箱及配件、木板材料、大屏幕控制器及相关硬件、LED显示屏五金配件、LED照明、激光灯应用、音响设备及器材的生产、加工销售与技术研发\"+\r\n        \"成立日期:2019-01-25\",\r\n  },\r\n  {\r\n    role: \"assistant\",\r\n    content: `您好，我是全德视讯科技有限公司的智能客服，我可以提供一些常用服务和信息。如果你有任何可以随时向我提问。`,\r\n  },\r\n\r\n]);\r\n\r\nconst chatListDom = ref(null);\r\n\r\n\r\nconst scrollToBottom = () => {\r\n  if (!chatListDom.value) return;\r\n\r\n  if (chatListDom.value) {\r\n    chatListDom.value[\"scrollTop\"] = chatListDom.value[\"scrollHeight\"];\r\n  }\r\n};\r\n\r\nwatch(messageList.value, () => nextTick(() => scrollToBottom()));\r\n\r\nconst openWebsite = () => {\r\n  /*  const windowFeatures = 'width=1000,height=600,top=200,left=450,toolbar=no';\r\n    // 使用 window.open() 打开指定网页，并设置窗口特性\r\n    window.open('https://www.tentech.top', '_blank', windowFeatures);*/\r\n};\r\n\r\nonMounted(() => {\r\n  if (getAPIKey()) {\r\n    switchConfigStatus();\r\n  }\r\n});\r\n\r\nconst appendLastMessageContent = (content: string) =>\r\n    (messageList.value[messageList.value.length - 1].content += content);\r\nconst sendChatMessage = async (content: string = messageContent.value) => {\r\n  try {\r\n    isTalking.value = true;\r\n    if (messageList.value.length === 2) {\r\n      messageList.value.pop();\r\n    }\r\n    messageList.value.push({ role: \"user\", content });\r\n    clearMessageContent();\r\n    messageList.value.push({ role: \"assistant\", content: \"\" });\r\n\r\n    const { body, status } = await chat(messageList.value, getAPIKey());\r\n    if (body) {\r\n      const reader = body.getReader();\r\n      await readStream(reader, status);\r\n    }\r\n  } catch (error: any) {\r\n    appendLastMessageContent(error);\r\n  } finally {\r\n    isTalking.value = false;\r\n  }\r\n};\r\nconst readStream = async (\r\n    reader: ReadableStreamDefaultReader<Uint8Array>,\r\n    status: number\r\n) => {\r\n  let partialLine = \"\";\r\n\r\n  while (true) {\r\n    // eslint-disable-next-line no-await-in-loop\r\n    const { value, done } = await reader.read();\r\n    if (done) break;\r\n\r\n    const decodedText = decoder.decode(value, { stream: true });\r\n\r\n    if (status !== 200) {\r\n      const json = JSON.parse(decodedText); // start with \"data: \"\r\n      const content = json.error.message ?? decodedText;\r\n      appendLastMessageContent(content);\r\n      return;\r\n    }\r\n\r\n    const chunk = partialLine + decodedText;\r\n    const newLines = chunk.split(/\\r?\\n/);\r\n\r\n    partialLine = newLines.pop() ?? \"\";\r\n\r\n    for (const line of newLines) {\r\n      if (line.length === 0) continue; // ignore empty message\r\n      if (line.startsWith(\":\")) continue; // ignore sse comment message\r\n      if (line === \"data: [DONE]\") return; //\r\n\r\n      const json = JSON.parse(line.substring(6)); // start with \"data: \"\r\n      const content =\r\n          status === 200\r\n              ? json.choices[0].delta.content ?? \"\"\r\n              : json.error.message;\r\n      appendLastMessageContent(content);\r\n    }\r\n  }\r\n};\r\nconst sendOrSave = () => {\r\n  if (isStringAllSpaces(messageContent.value) ||messageContent.value.length===0 || isTalking===true ){\r\n    messageContent.value ='';\r\n    return;\r\n  }\r\n  if (isConfig.value) {\r\n    if (saveAPIKey(messageContent.value.trim())) {\r\n      switchConfigStatus();\r\n    }\r\n    clearMessageContent();\r\n  } else {\r\n    const content = messageContent.value.trim()\r\n    let index = isKeywordHit(content, keywords)\r\n    if (index !== -1) {\r\n      // 如果包含关键词\r\n      keywordsChat(index);\r\n    } else {\r\n      sendChatMessage();\r\n    }\r\n  }\r\n};\r\n\r\n\r\n//余弦相似度 处理英文\r\nfunction cosineSimilarity(str1, str2) {\r\n  // 将字符串转换为词语数组\r\n  const tokenize = (str) => str.toLowerCase().match(/\\w+/g) || [];\r\n\r\n  const tokens1 = tokenize(str1);\r\n  const tokens2 = tokenize(str2);\r\n\r\n  // 创建词频向量\r\n  const vector1 = {};\r\n  const vector2 = {};\r\n\r\n  tokens1.forEach((token) => {\r\n    vector1[token] = (vector1[token] || 0) + 1;\r\n  });\r\n\r\n  tokens2.forEach((token) => {\r\n    vector2[token] = (vector2[token] || 0) + 1;\r\n  });\r\n\r\n  // 计算余弦相似度\r\n  const dotProduct = Object.keys(vector1).reduce((acc, token) => {\r\n    return acc + (vector1[token] || 0) * (vector2[token] || 0);\r\n  }, 0);\r\n\r\n  const magnitude1 = Math.sqrt(Object.keys(vector1).reduce((acc, token) => {\r\n    return acc + Math.pow(vector1[token] || 0, 2);\r\n  }, 0));\r\n\r\n  const magnitude2 = Math.sqrt(Object.keys(vector2).reduce((acc, token) => {\r\n    return acc + Math.pow(vector2[token] || 0, 2);\r\n  }, 0));\r\n\r\n  if (magnitude1 === 0 || magnitude2 === 0) {\r\n    return 0;  // 处理零向量\r\n  }\r\n\r\n  return dotProduct / (magnitude1 * magnitude2);\r\n}\r\n\r\n\r\n//编辑距离相似度\r\nfunction similarity(str1, str2) {\r\n  const longer = str1.length > str2.length ? str1 : str2;\r\n  const shorter = str1.length > str2.length ? str2 : str1;\r\n  const longerLength = longer.length;\r\n  if (longerLength === 0) {\r\n    return 1.0;\r\n  }\r\n  const editDistance = new Array(longerLength + 1);\r\n  for (let i = 0; i <= longerLength; i++) {\r\n    editDistance[i] = new Array(shorter.length + 1);\r\n    editDistance[i][0] = i;\r\n  }\r\n  for (let j = 0; j <= shorter.length; j++) {\r\n    editDistance[0][j] = j;\r\n  }\r\n  for (let i = 1; i <= longerLength; i++) {\r\n    for (let j = 1; j <= shorter.length; j++) {\r\n      const cost = longer[i - 1] === shorter[j - 1] ? 0 : 1;\r\n      editDistance[i][j] = Math.min(\r\n          editDistance[i - 1][j] + 1,\r\n          editDistance[i][j - 1] + 1,\r\n          editDistance[i - 1][j - 1] + cost\r\n      );\r\n    }\r\n  }\r\n  const maxLen = Math.max(str1.length, str2.length);\r\n  const editDistanceValue = editDistance[longerLength][shorter.length];\r\n  const similarity = (1.0 - editDistanceValue / maxLen);\r\n  return similarity;\r\n}\r\nfunction isKeywordHit(content) {\r\n  let keywordsArray = keywords;\r\n  const matchingIndices = [];\r\n  let matchingIndicesMap = new Map()\r\n  for (let i = 0; i < keywordsArray.length; i++) {\r\n    const keywords = keywordsArray[i];\r\n    const similarities = keywords.map(keyword => similarity(content, keyword));\r\n    const maxSimilarity = Math.max(...similarities);\r\n    if (maxSimilarity >= similarThreshold) {\r\n      matchingIndices.push(i);\r\n      matchingIndicesMap.set(i,maxSimilarity)\r\n    }\r\n  }\r\n  if (matchingIndices.length > 0) {\r\n    let maxSimilarityIndex = -1;\r\n    let maxSimilarityValue = -1;\r\n    matchingIndicesMap.forEach((similarityValue, index) => {\r\n      if (similarityValue > maxSimilarityValue) {\r\n        maxSimilarityValue = similarityValue;\r\n        maxSimilarityIndex = index;\r\n      }\r\n    });\r\n    return maxSimilarityIndex;\r\n  } else {\r\n    return -1;\r\n  }\r\n}\r\n\r\nfunction keywordsChat(index){\r\n  let content = \"\"\r\n  content = messageContent.value\r\n  isTalking.value = true;\r\n  if (messageList.value.length === 2) {\r\n    messageList.value.pop();\r\n  }\r\n  messageList.value.push({ role: \"user\", content });\r\n  clearMessageContent();\r\n  let message = \"\"\r\n  if (keywordsArray.keywordsMap.get(index)){\r\n    message = keywordsArray.keywordsMap.get(index).message\r\n  }\r\n  messageList.value.push({ role: \"assistant\", content: \"\" });\r\n\r\n  const messageChunks = message.split(\"\"); // 拆分消息成字符数组\r\n  let currentIndex = 0;\r\n\r\n  /*流式输出*/\r\n  const addMessage = () => {\r\n    if (currentIndex < messageChunks.length) {\r\n      messageList.value[messageList.value.length-1].content += messageChunks[currentIndex];\r\n      currentIndex++;\r\n      if (currentIndex < messageChunks.length) {\r\n        setTimeout(addMessage, 20); // 每隔1秒添加下一个字符\r\n      } else {\r\n        isTalking.value = false;\r\n      }\r\n    }\r\n  };\r\n  // 开始添加消息字符\r\n  addMessage();\r\n}\r\n\r\nconst saveAPIKey = (apiKey: string) => {\r\n  if (apiKey.slice(0, 3) !== \"sk-\" || apiKey.length !== 51) {\r\n    alert(\"API Key 错误，请检查后重新输入！\");\r\n    return false;\r\n  }\r\n  const aesAPIKey = cryptoJS.AES.encrypt(apiKey, getSecretKey()).toString();\r\n  localStorage.setItem(\"apiKey\", aesAPIKey);\r\n  return true;\r\n};\r\nconst getAPIKey = () => {\r\n  if (apiKey) return apiKey;\r\n  const aesAPIKey = localStorage.getItem(\"apiKey\") ?? \"\";\r\n  apiKey = cryptoJS.AES.decrypt(aesAPIKey, getSecretKey()).toString(\r\n      cryptoJS.enc.Utf8\r\n  );\r\n  return apiKey;\r\n};\r\nconst getSecretKey = () => \"lianginx\";\r\nconst switchConfigStatus = () => (isConfig.value = !isConfig.value);\r\nconst clearMessageContent = () => (messageContent.value = \"\");\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (!whiteList.value.includes(_unref(route).path))\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        (!isShowChatWindows.value)\n          ? (_openBlock(), _createElementBlock(\"div\", {\n              key: 0,\n              class: \"root-page\",\n              onMouseleave: _cache[0] || (_cache[0] = ($event: any) => (isMouseOver.value=false)),\n              onMouseover: _cache[1] || (_cache[1] = ($event: any) => (isMouseOver.value=true)),\n              onClick: _cache[2] || (_cache[2] = ($event: any) => (isShowChatWindows.value = true))\n            }, _hoisted_3, 32))\n          : _createCommentVNode(\"\", true),\n        (!isShowChatWindows.value)\n          ? (_openBlock(), _createElementBlock(\"div\", {\n              key: 1,\n              class: _normalizeClass([\"card-container\", {hoverCard:isMouseOver.value}]),\n              onMouseleave: _cache[3] || (_cache[3] = ($event: any) => (isMouseOver.value=false)),\n              onMouseover: _cache[4] || (_cache[4] = ($event: any) => (isMouseOver.value=true))\n            }, [\n              _createElementVNode(\"div\", { class: \"card\" }, [\n                _hoisted_4,\n                _createElementVNode(\"div\", {\n                  class: \"card-item more-contact\",\n                  onClick: gotoTargetPage\n                }, _hoisted_10)\n              ]),\n              _hoisted_11\n            ], 34))\n          : _createCommentVNode(\"\", true),\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"chat-windows\", {'show-chat-windows':isShowChatWindows.value}])\n        }, [\n          _createElementVNode(\"div\", _hoisted_12, [\n            _hoisted_13,\n            _createElementVNode(\"div\", {\n              class: \"close-button\",\n              onClick: _cache[5] || (_cache[5] = ($event: any) => {isShowChatWindows.value=false;isMouseOver.value=false})\n            }, _hoisted_15)\n          ]),\n          _createElementVNode(\"div\", {\n            class: \"chat-message-container\",\n            ref_key: \"chatListDom\",\n            ref: chatListDom\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(messageList.value.filter((v) => v.role !== 'system'), (item) => {\n              return (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                (item.role === 'user')\n                  ? (_openBlock(), _createElementBlock(\"div\", {\n                      key: 0,\n                      class: _normalizeClass([\"user-message-content\", item.role === 'user'? 'user-message':'service-message'])\n                    }, [\n                      (item.content)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"user-message-item\",\n                            innerHTML: _unref(md).render(item.content)\n                          }, null, 8, _hoisted_17))\n                        : _createCommentVNode(\"\", true),\n                      _hoisted_18\n                    ], 2))\n                  : _createCommentVNode(\"\", true),\n                (item.role !== 'user')\n                  ? (_openBlock(), _createElementBlock(\"div\", {\n                      key: 1,\n                      class: _normalizeClass([\"user-message-content\", item.role === 'user'? 'user-message':'service-message'])\n                    }, [\n                      _hoisted_19,\n                      (item.content)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"no-user-message-item\",\n                            innerHTML: getHtml(item.content)\n                          }, null, 8, _hoisted_20))\n                        : _createCommentVNode(\"\", true)\n                    ], 2))\n                  : _createCommentVNode(\"\", true)\n              ]))\n            }), 256))\n          ], 512),\n          _createElementVNode(\"div\", _hoisted_21, [\n            _hoisted_22,\n            _createElementVNode(\"div\", _hoisted_23, [\n              _withDirectives(_createElementVNode(\"textarea\", {\n                class: \"message-input\",\n                placeholder: \"很高兴为您服务，请输入您的问题\",\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => (_isRef(messageContent) ? (messageContent).value = $event : messageContent = $event)),\n                onKeydown: _cache[7] || (_cache[7] = _withKeys(($event: any) => (_unref(isTalking) || sendOrSave()), [\"enter\"]))\n              }, null, 544), [\n                [_vModelText, _unref(messageContent)]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_24, [\n              _createElementVNode(\"div\", {\n                class: _normalizeClass([\"send-message-button\", {available:getAvailableButton()}]),\n                onClick: _cache[8] || (_cache[8] = ($event: any) => (sendOrSave()))\n              }, \" 发送 \", 2)\n            ])\n          ])\n        ], 2)\n      ]))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})",
      "start": 1699633499565,
      "end": 1699633499565
    },
    {
      "name": "nuxt:layer-aliasing",
      "start": 1699633499565,
      "end": 1699633499565,
      "order": "pre"
    },
    {
      "name": "nuxt:server-devonly:transform",
      "start": 1699633499566,
      "end": 1699633499566,
      "order": "pre"
    },
    {
      "name": "nuxt:client-fallback-auto-id",
      "start": 1699633499567,
      "end": 1699633499567,
      "order": "pre"
    },
    {
      "name": "vite:css",
      "start": 1699633499567,
      "end": 1699633499567,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "result": "import { defineComponent as _defineComponent } from \"vue\";\nimport { unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, isRef as _isRef, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-874f0d2b\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = { key: 0 };\nconst _hoisted_2 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/human1.svg\" }, null, -1));\nconst _hoisted_3 = [\n  _hoisted_2\n];\nconst _hoisted_4 = /* @__PURE__ */ _createStaticVNode('<div class=\"card-item call-phone\" data-v-874f0d2b><img src=\"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/24gf-phoneLoudspeaker.svg\" data-v-874f0d2b><div class=\"phone-number\" data-v-874f0d2b><p data-v-874f0d2b>热线服务</p><h1 data-v-874f0d2b>4008786861</h1></div></div><div class=\"card-line\" data-v-874f0d2b></div><div class=\"card-item contact\" data-v-874f0d2b><img src=\"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/message.svg\" data-v-874f0d2b><p data-v-874f0d2b>在线沟通:</p><a href=\"https://work.weixin.qq.com/kfid/kfc074a672e3be7ec8a\" target=\"_blank\" class=\"contact-button\" data-v-874f0d2b> 立即联系 </a></div><div class=\"card-line\" data-v-874f0d2b></div>', 4);\nconst _hoisted_8 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\"div\", null, \"在线线留言咨询\", -1));\nconst _hoisted_9 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/right-arrow.svg\" }, null, -1));\nconst _hoisted_10 = [\n  _hoisted_8,\n  _hoisted_9\n];\nconst _hoisted_11 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\"div\", { class: \"noshow-card\" }, null, -1));\nconst _hoisted_12 = { class: \"windows-header\" };\nconst _hoisted_13 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\"div\", { class: \"chat-logo-container\" }, [\n  /* @__PURE__ */ _createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/20231019165013.png\" }),\n  /* @__PURE__ */ _createElementVNode(\"div\", { class: \"welcome\" }, [\n    /* @__PURE__ */ _createElementVNode(\"h1\", null, \"Hi,您好\"),\n    /* @__PURE__ */ _createElementVNode(\"p\", null, \"很高兴很为您服务，服务热线：4008786861\")\n  ])\n], -1));\nconst _hoisted_14 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\"div\", { class: \"close-line\" }, null, -1));\nconst _hoisted_15 = [\n  _hoisted_14\n];\nconst _hoisted_16 = { class: \"message-item\" };\nconst _hoisted_17 = [\"innerHTML\"];\nconst _hoisted_18 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/cust2.png\" }, null, -1));\nconst _hoisted_19 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/ServiceLogo.png\" }, null, -1));\nconst _hoisted_20 = [\"innerHTML\"];\nconst _hoisted_21 = { class: \"message-send-container\" };\nconst _hoisted_22 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\"div\", { class: \"service-level-container\" }, [\n  /* @__PURE__ */ _createElementVNode(\"div\", { class: \"human-service\" }, [\n    /* @__PURE__ */ _createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/human-service.svg\" }),\n    /* @__PURE__ */ _createElementVNode(\"a\", {\n      href: \"https://work.weixin.qq.com/kfid/kfc074a672e3be7ec8a\",\n      target: \"_blank\"\n    }, \"转人工\")\n  ])\n], -1));\nconst _hoisted_23 = { class: \"message-container\" };\nconst _hoisted_24 = { class: \"send-message-button-container\" };\nimport { useRoute, useRouter } from \"vue-router\";\nimport { ref, watch, nextTick, onMounted } from \"vue\";\nimport { chat } from \"../assets/libs/gpt\";\nimport cryptoJS from \"crypto-js\";\nimport keywordsArray from \"../assets/js/keywordsChat/keywordsArray\";\nimport { md } from \"../assets/libs/markdown\";\nconst similarThreshold = 0.75;\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"customer\",\n  setup(__props) {\n    const router = useRouter();\n    const route = useRoute();\n    function gotoTargetPage() {\n    }\n    function isStringAllSpaces(inputString) {\n      return inputString.trim() === \"\";\n    }\n    function getAvailableButton() {\n      if (isStringAllSpaces(messageContent.value) || messageContent.value.length === 0 || isTalking === true) {\n        messageContent.value = \"\";\n        return false;\n      } else {\n        return true;\n      }\n    }\n    const whiteList = ref([\"/login\", \"/reset-password\", \"/sign-up\"]);\n    let apiKey = \"sk-VcsMNS2JQziQbWaFdmRvHBVqzIH0Ph6QNLN5a1X8QdaemMQ7\";\n    let isConfig = ref(true);\n    let isTalking = ref(false);\n    const isMouseOver = ref(false);\n    let messageContent = ref(\"\");\n    const isShowChatWindows = ref(false);\n    function getHtml(content) {\n      let html = md.render(content).replace(/<li>/g, `<li style='opacity: 1;margin-left:15px'> `);\n      return html.replace(/<p>.*?<img.*?<\\/p>/g, (match) => {\n        return match.replace(/<img/g, '<img style=\"max-width: 200px; max-height: 200px\"');\n      });\n    }\n    const decoder = new TextDecoder(\"utf-8\");\n    const roleAlias = { user: \"ME\", assistant: \"ChatGPT\", system: \"System\" };\n    let keywords = keywordsArray.keywordsArrayList;\n    const messageList = ref([\n      /*调教 将chatGPT带入角色*/\n      {\n        role: \"system\",\n        content: \"你是深圳市全德视讯科技有限公司的智能客服名字是全德英文名字是Tentech,你是公司的员工不要用'他们'这样的词，要用我们或者我们公司，你职责是：1.提供产品信息和支持：回答客户关于公司产品的问题，提供详细的产品信息和技术支持。包括产品功能、规格、价格、可用性等方面的咨询。2.解决问题和投诉：协助客户解决产品使用中遇到的问题，处理客户的投诉和问题，确保客户满意。3.提供培训和指导：为客户提供关于产品的培训和指导，以确保他们能够有效地使用产品。包括编写和维护用户手册、视频教程等。4.技术支持：为客户提供技术支持，协助解决与产品相关的技术问题。包括与工程团队合作解决更复杂的技术问题。公司的主营产品是:LED显示屏公司地址:深圳市光明区玉塘街道田寮社区第五工业区14栋2楼A公司邮箱: flamehu@tentech-leddisplay.com公司电话:+86-15818643042主营:：国内贸易、货物及技术进出口，许可经营项目是：电子产品、LED显示屏、发光二极管、大屏幕显示设备、航空箱及配件、木板材料、大屏幕控制器及相关硬件、LED显示屏五金配件、LED照明、激光灯应用、音响设备及器材的生产、加工销售与技术研发成立日期:2019-01-25\"\n      },\n      {\n        role: \"assistant\",\n        content: `您好，我是全德视讯科技有限公司的智能客服，我可以提供一些常用服务和信息。如果你有任何可以随时向我提问。`\n      }\n    ]);\n    const chatListDom = ref(null);\n    const scrollToBottom = () => {\n      if (!chatListDom.value)\n        return;\n      if (chatListDom.value) {\n        chatListDom.value[\"scrollTop\"] = chatListDom.value[\"scrollHeight\"];\n      }\n    };\n    watch(messageList.value, () => nextTick(() => scrollToBottom()));\n    const openWebsite = () => {\n    };\n    onMounted(() => {\n      if (getAPIKey()) {\n        switchConfigStatus();\n      }\n    });\n    const appendLastMessageContent = (content) => messageList.value[messageList.value.length - 1].content += content;\n    const sendChatMessage = async (content = messageContent.value) => {\n      try {\n        isTalking.value = true;\n        if (messageList.value.length === 2) {\n          messageList.value.pop();\n        }\n        messageList.value.push({ role: \"user\", content });\n        clearMessageContent();\n        messageList.value.push({ role: \"assistant\", content: \"\" });\n        const { body, status } = await chat(messageList.value, getAPIKey());\n        if (body) {\n          const reader = body.getReader();\n          await readStream(reader, status);\n        }\n      } catch (error) {\n        appendLastMessageContent(error);\n      } finally {\n        isTalking.value = false;\n      }\n    };\n    const readStream = async (reader, status) => {\n      let partialLine = \"\";\n      while (true) {\n        const { value, done } = await reader.read();\n        if (done)\n          break;\n        const decodedText = decoder.decode(value, { stream: true });\n        if (status !== 200) {\n          const json = JSON.parse(decodedText);\n          const content = json.error.message ?? decodedText;\n          appendLastMessageContent(content);\n          return;\n        }\n        const chunk = partialLine + decodedText;\n        const newLines = chunk.split(/\\r?\\n/);\n        partialLine = newLines.pop() ?? \"\";\n        for (const line of newLines) {\n          if (line.length === 0)\n            continue;\n          if (line.startsWith(\":\"))\n            continue;\n          if (line === \"data: [DONE]\")\n            return;\n          const json = JSON.parse(line.substring(6));\n          const content = status === 200 ? json.choices[0].delta.content ?? \"\" : json.error.message;\n          appendLastMessageContent(content);\n        }\n      }\n    };\n    const sendOrSave = () => {\n      if (isStringAllSpaces(messageContent.value) || messageContent.value.length === 0 || isTalking === true) {\n        messageContent.value = \"\";\n        return;\n      }\n      if (isConfig.value) {\n        if (saveAPIKey(messageContent.value.trim())) {\n          switchConfigStatus();\n        }\n        clearMessageContent();\n      } else {\n        const content = messageContent.value.trim();\n        let index = isKeywordHit(content, keywords);\n        if (index !== -1) {\n          keywordsChat(index);\n        } else {\n          sendChatMessage();\n        }\n      }\n    };\n    function cosineSimilarity(str1, str2) {\n      const tokenize = (str) => str.toLowerCase().match(/\\w+/g) || [];\n      const tokens1 = tokenize(str1);\n      const tokens2 = tokenize(str2);\n      const vector1 = {};\n      const vector2 = {};\n      tokens1.forEach((token) => {\n        vector1[token] = (vector1[token] || 0) + 1;\n      });\n      tokens2.forEach((token) => {\n        vector2[token] = (vector2[token] || 0) + 1;\n      });\n      const dotProduct = Object.keys(vector1).reduce((acc, token) => {\n        return acc + (vector1[token] || 0) * (vector2[token] || 0);\n      }, 0);\n      const magnitude1 = Math.sqrt(Object.keys(vector1).reduce((acc, token) => {\n        return acc + Math.pow(vector1[token] || 0, 2);\n      }, 0));\n      const magnitude2 = Math.sqrt(Object.keys(vector2).reduce((acc, token) => {\n        return acc + Math.pow(vector2[token] || 0, 2);\n      }, 0));\n      if (magnitude1 === 0 || magnitude2 === 0) {\n        return 0;\n      }\n      return dotProduct / (magnitude1 * magnitude2);\n    }\n    function similarity(str1, str2) {\n      const longer = str1.length > str2.length ? str1 : str2;\n      const shorter = str1.length > str2.length ? str2 : str1;\n      const longerLength = longer.length;\n      if (longerLength === 0) {\n        return 1;\n      }\n      const editDistance = new Array(longerLength + 1);\n      for (let i = 0; i <= longerLength; i++) {\n        editDistance[i] = new Array(shorter.length + 1);\n        editDistance[i][0] = i;\n      }\n      for (let j = 0; j <= shorter.length; j++) {\n        editDistance[0][j] = j;\n      }\n      for (let i = 1; i <= longerLength; i++) {\n        for (let j = 1; j <= shorter.length; j++) {\n          const cost = longer[i - 1] === shorter[j - 1] ? 0 : 1;\n          editDistance[i][j] = Math.min(\n            editDistance[i - 1][j] + 1,\n            editDistance[i][j - 1] + 1,\n            editDistance[i - 1][j - 1] + cost\n          );\n        }\n      }\n      const maxLen = Math.max(str1.length, str2.length);\n      const editDistanceValue = editDistance[longerLength][shorter.length];\n      const similarity2 = 1 - editDistanceValue / maxLen;\n      return similarity2;\n    }\n    function isKeywordHit(content) {\n      let keywordsArray2 = keywords;\n      const matchingIndices = [];\n      let matchingIndicesMap = /* @__PURE__ */ new Map();\n      for (let i = 0; i < keywordsArray2.length; i++) {\n        const keywords2 = keywordsArray2[i];\n        const similarities = keywords2.map((keyword) => similarity(content, keyword));\n        const maxSimilarity = Math.max(...similarities);\n        if (maxSimilarity >= similarThreshold) {\n          matchingIndices.push(i);\n          matchingIndicesMap.set(i, maxSimilarity);\n        }\n      }\n      if (matchingIndices.length > 0) {\n        let maxSimilarityIndex = -1;\n        let maxSimilarityValue = -1;\n        matchingIndicesMap.forEach((similarityValue, index) => {\n          if (similarityValue > maxSimilarityValue) {\n            maxSimilarityValue = similarityValue;\n            maxSimilarityIndex = index;\n          }\n        });\n        return maxSimilarityIndex;\n      } else {\n        return -1;\n      }\n    }\n    function keywordsChat(index) {\n      let content = \"\";\n      content = messageContent.value;\n      isTalking.value = true;\n      if (messageList.value.length === 2) {\n        messageList.value.pop();\n      }\n      messageList.value.push({ role: \"user\", content });\n      clearMessageContent();\n      let message = \"\";\n      if (keywordsArray.keywordsMap.get(index)) {\n        message = keywordsArray.keywordsMap.get(index).message;\n      }\n      messageList.value.push({ role: \"assistant\", content: \"\" });\n      const messageChunks = message.split(\"\");\n      let currentIndex = 0;\n      const addMessage = () => {\n        if (currentIndex < messageChunks.length) {\n          messageList.value[messageList.value.length - 1].content += messageChunks[currentIndex];\n          currentIndex++;\n          if (currentIndex < messageChunks.length) {\n            setTimeout(addMessage, 20);\n          } else {\n            isTalking.value = false;\n          }\n        }\n      };\n      addMessage();\n    }\n    const saveAPIKey = (apiKey2) => {\n      if (apiKey2.slice(0, 3) !== \"sk-\" || apiKey2.length !== 51) {\n        alert(\"API Key 错误，请检查后重新输入！\");\n        return false;\n      }\n      const aesAPIKey = cryptoJS.AES.encrypt(apiKey2, getSecretKey()).toString();\n      localStorage.setItem(\"apiKey\", aesAPIKey);\n      return true;\n    };\n    const getAPIKey = () => {\n      if (apiKey)\n        return apiKey;\n      const aesAPIKey = localStorage.getItem(\"apiKey\") ?? \"\";\n      apiKey = cryptoJS.AES.decrypt(aesAPIKey, getSecretKey()).toString(\n        cryptoJS.enc.Utf8\n      );\n      return apiKey;\n    };\n    const getSecretKey = () => \"lianginx\";\n    const switchConfigStatus = () => isConfig.value = !isConfig.value;\n    const clearMessageContent = () => messageContent.value = \"\";\n    return (_ctx, _cache) => {\n      return !whiteList.value.includes(_unref(route).path) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        !isShowChatWindows.value ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 0,\n          class: \"root-page\",\n          onMouseleave: _cache[0] || (_cache[0] = ($event) => isMouseOver.value = false),\n          onMouseover: _cache[1] || (_cache[1] = ($event) => isMouseOver.value = true),\n          onClick: _cache[2] || (_cache[2] = ($event) => isShowChatWindows.value = true)\n        }, _hoisted_3, 32)) : _createCommentVNode(\"\", true),\n        !isShowChatWindows.value ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 1,\n          class: _normalizeClass([\"card-container\", { hoverCard: isMouseOver.value }]),\n          onMouseleave: _cache[3] || (_cache[3] = ($event) => isMouseOver.value = false),\n          onMouseover: _cache[4] || (_cache[4] = ($event) => isMouseOver.value = true)\n        }, [\n          _createElementVNode(\"div\", { class: \"card\" }, [\n            _hoisted_4,\n            _createElementVNode(\"div\", {\n              class: \"card-item more-contact\",\n              onClick: gotoTargetPage\n            }, _hoisted_10)\n          ]),\n          _hoisted_11\n        ], 34)) : _createCommentVNode(\"\", true),\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"chat-windows\", { \"show-chat-windows\": isShowChatWindows.value }])\n        }, [\n          _createElementVNode(\"div\", _hoisted_12, [\n            _hoisted_13,\n            _createElementVNode(\"div\", {\n              class: \"close-button\",\n              onClick: _cache[5] || (_cache[5] = ($event) => {\n                isShowChatWindows.value = false;\n                isMouseOver.value = false;\n              })\n            }, _hoisted_15)\n          ]),\n          _createElementVNode(\"div\", {\n            class: \"chat-message-container\",\n            ref_key: \"chatListDom\",\n            ref: chatListDom\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(messageList.value.filter((v) => v.role !== \"system\"), (item) => {\n              return _openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                item.role === \"user\" ? (_openBlock(), _createElementBlock(\"div\", {\n                  key: 0,\n                  class: _normalizeClass([\"user-message-content\", item.role === \"user\" ? \"user-message\" : \"service-message\"])\n                }, [\n                  item.content ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"user-message-item\",\n                    innerHTML: _unref(md).render(item.content)\n                  }, null, 8, _hoisted_17)) : _createCommentVNode(\"\", true),\n                  _hoisted_18\n                ], 2)) : _createCommentVNode(\"\", true),\n                item.role !== \"user\" ? (_openBlock(), _createElementBlock(\"div\", {\n                  key: 1,\n                  class: _normalizeClass([\"user-message-content\", item.role === \"user\" ? \"user-message\" : \"service-message\"])\n                }, [\n                  _hoisted_19,\n                  item.content ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"no-user-message-item\",\n                    innerHTML: getHtml(item.content)\n                  }, null, 8, _hoisted_20)) : _createCommentVNode(\"\", true)\n                ], 2)) : _createCommentVNode(\"\", true)\n              ]);\n            }), 256))\n          ], 512),\n          _createElementVNode(\"div\", _hoisted_21, [\n            _hoisted_22,\n            _createElementVNode(\"div\", _hoisted_23, [\n              _withDirectives(_createElementVNode(\"textarea\", {\n                class: \"message-input\",\n                placeholder: \"很高兴为您服务，请输入您的问题\",\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => _isRef(messageContent) ? messageContent.value = $event : messageContent = $event),\n                onKeydown: _cache[7] || (_cache[7] = _withKeys(($event) => _unref(isTalking) || sendOrSave(), [\"enter\"]))\n              }, null, 544), [\n                [_vModelText, _unref(messageContent)]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_24, [\n              _createElementVNode(\"div\", {\n                class: _normalizeClass([\"send-message-button\", { available: getAvailableButton() }]),\n                onClick: _cache[8] || (_cache[8] = ($event) => sendOrSave())\n              }, \" 发送 \", 2)\n            ])\n          ])\n        ], 2)\n      ])) : _createCommentVNode(\"\", true);\n    };\n  }\n});\n",
      "start": 1699633499572,
      "end": 1699633499625,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "sources": [
          "F:/workSpace2024/knowledge-nuxt3/components/customer.vue?vue&type=script&setup=true&lang.ts"
        ],
        "sourcesContent": [
          "import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, isRef as _isRef, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-874f0d2b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/human1.svg\" }, null, -1))\nconst _hoisted_3 = [\n  _hoisted_2\n]\nconst _hoisted_4 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"card-item call-phone\\\" data-v-874f0d2b><img src=\\\"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/24gf-phoneLoudspeaker.svg\\\" data-v-874f0d2b><div class=\\\"phone-number\\\" data-v-874f0d2b><p data-v-874f0d2b>热线服务</p><h1 data-v-874f0d2b>4008786861</h1></div></div><div class=\\\"card-line\\\" data-v-874f0d2b></div><div class=\\\"card-item contact\\\" data-v-874f0d2b><img src=\\\"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/message.svg\\\" data-v-874f0d2b><p data-v-874f0d2b>在线沟通:</p><a href=\\\"https://work.weixin.qq.com/kfid/kfc074a672e3be7ec8a\\\" target=\\\"_blank\\\" class=\\\"contact-button\\\" data-v-874f0d2b> 立即联系 </a></div><div class=\\\"card-line\\\" data-v-874f0d2b></div>\", 4)\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"在线线留言咨询\", -1))\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/right-arrow.svg\" }, null, -1))\nconst _hoisted_10 = [\n  _hoisted_8,\n  _hoisted_9\n]\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"noshow-card\" }, null, -1))\nconst _hoisted_12 = { class: \"windows-header\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"chat-logo-container\" }, [\n  /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/20231019165013.png\" }),\n  /*#__PURE__*/_createElementVNode(\"div\", { class: \"welcome\" }, [\n    /*#__PURE__*/_createElementVNode(\"h1\", null, \"Hi,您好\"),\n    /*#__PURE__*/_createElementVNode(\"p\", null, \"很高兴很为您服务，服务热线：4008786861\")\n  ])\n], -1))\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"close-line\" }, null, -1))\nconst _hoisted_15 = [\n  _hoisted_14\n]\nconst _hoisted_16 = { class: \"message-item\" }\nconst _hoisted_17 = [\"innerHTML\"]\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/cust2.png\" }, null, -1))\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/ServiceLogo.png\" }, null, -1))\nconst _hoisted_20 = [\"innerHTML\"]\nconst _hoisted_21 = { class: \"message-send-container\" }\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"service-level-container\" }, [\n  /*#__PURE__*/_createElementVNode(\"div\", { class: \"human-service\" }, [\n    /*#__PURE__*/_createElementVNode(\"img\", { src: \"https://tentech.oss-cn-shenzhen.aliyuncs.com/custom/human-service.svg\" }),\n    /*#__PURE__*/_createElementVNode(\"a\", {\n      href: \"https://work.weixin.qq.com/kfid/kfc074a672e3be7ec8a\",\n      target: \"_blank\"\n    }, \"转人工\")\n  ])\n], -1))\nconst _hoisted_23 = { class: \"message-container\" }\nconst _hoisted_24 = { class: \"send-message-button-container\" }\n\nimport {useRoute, useRouter} from \"vue-router\";\r\nimport {ref, watch, nextTick, onMounted} from \"vue\";\r\nimport {chat} from \"../assets/libs/gpt\";\r\nimport type {ChatMessage} from \"../assets/types\";\r\nimport cryptoJS from \"crypto-js\";\r\nimport keywordsList from \"../assets/js/keywordsChat/keywordsList\";\r\nimport keywordsArray from \"../assets/js/keywordsChat/keywordsArray\";\r\n\r\nimport { md } from \"../assets/libs/markdown\";\r\nconst similarThreshold = 0.75; // 设置相似度阈值\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'customer',\n  setup(__props) {\n\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nfunction gotoTargetPage(){\r\n\r\n}\r\n\r\nfunction isStringAllSpaces(inputString) {\r\n  // 使用trim()方法去掉字符串两端的空格，然后检查结果是否为空字符串\r\n  return inputString.trim() === '';\r\n}\r\n\r\nfunction getAvailableButton(){\r\n  if (isStringAllSpaces(messageContent.value) ||messageContent.value.length===0 || isTalking===true ){\r\n    messageContent.value ='';\r\n    return false;\r\n  }else {\r\n    return true\r\n  }\r\n}\r\n\r\n\r\n\r\nconst whiteList = ref([\"/login\", \"/reset-password\",\"/sign-up\"]); // 不需要渲染的名单\r\n\r\n/*let apiKey = \"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\";*/\r\n/*let apiKey = \"sk-VcsMNS2JQziQbWaFdmRvHBVqzIH0Ph6QNLN5a1X8QdaemMQ7\";*/\r\n\r\n\r\nlet apiKey = \"sk-VcsMNS2JQziQbWaFdmRvHBVqzIH0Ph6QNLN5a1X8QdaemMQ7\";\r\n\r\nlet isConfig = ref(true);\r\nlet isTalking = ref(false);\r\nconst isMouseOver = ref(false)\r\nlet messageContent = ref(\"\");\r\n\r\nconst isShowChatWindows = ref(false)\r\nfunction getHtml(content){\r\n  let html = md.render(content).replace(/<li>/g, `<li style='opacity: 1;margin-left:15px'> `)\r\n  return html.replace(/<p>.*?<img.*?<\\/p>/g, (match: string) => {\r\n    return match.replace(/<img/g, '<img style=\"max-width: 200px; max-height: 200px\"')\r\n  });\r\n}\r\n\r\nconst decoder = new TextDecoder(\"utf-8\");\r\nconst roleAlias = { user: \"ME\", assistant: \"ChatGPT\", system: \"System\" };\r\nlet keywords = keywordsArray.keywordsArrayList; // 添加你的关键词\r\nconst messageList = ref<ChatMessage[]>([\r\n  /*调教 将chatGPT带入角色*/\r\n  {\r\n    role: \"system\",\r\n    content: \"你是深圳市全德视讯科技有限公司的智能客服名字是全德英文名字是Tentech,你是公司的员工不要用'他们'这样的词，要用我们或者我们公司，\" +\r\n        \"你职责是：\" +\r\n        \"1.提供产品信息和支持：回答客户关于公司产品的问题，提供详细的产品信息和技术支持。包括产品功能、规格、价格、可用性等方面的咨询。\" +\r\n        \"2.解决问题和投诉：协助客户解决产品使用中遇到的问题，处理客户的投诉和问题，确保客户满意。\" +\r\n        \"3.提供培训和指导：为客户提供关于产品的培训和指导，以确保他们能够有效地使用产品。包括编写和维护用户手册、视频教程等。\" +\r\n        \"4.技术支持：为客户提供技术支持，协助解决与产品相关的技术问题。包括与工程团队合作解决更复杂的技术问题。\" +\r\n        \"公司的主营产品是:LED显示屏\" +\r\n        \"公司地址:深圳市光明区玉塘街道田寮社区第五工业区14栋2楼A\" +\r\n        \"公司邮箱: flamehu@tentech-leddisplay.com\"+\r\n        \"公司电话:+86-15818643042\"+\r\n        \"主营:：国内贸易、货物及技术进出口，许可经营项目是：电子产品、LED显示屏、发光二极管、大屏幕显示设备、航空箱及配件、木板材料、大屏幕控制器及相关硬件、LED显示屏五金配件、LED照明、激光灯应用、音响设备及器材的生产、加工销售与技术研发\"+\r\n        \"成立日期:2019-01-25\",\r\n  },\r\n  {\r\n    role: \"assistant\",\r\n    content: `您好，我是全德视讯科技有限公司的智能客服，我可以提供一些常用服务和信息。如果你有任何可以随时向我提问。`,\r\n  },\r\n\r\n]);\r\n\r\nconst chatListDom = ref(null);\r\n\r\n\r\nconst scrollToBottom = () => {\r\n  if (!chatListDom.value) return;\r\n\r\n  if (chatListDom.value) {\r\n    chatListDom.value[\"scrollTop\"] = chatListDom.value[\"scrollHeight\"];\r\n  }\r\n};\r\n\r\nwatch(messageList.value, () => nextTick(() => scrollToBottom()));\r\n\r\nconst openWebsite = () => {\r\n  /*  const windowFeatures = 'width=1000,height=600,top=200,left=450,toolbar=no';\r\n    // 使用 window.open() 打开指定网页，并设置窗口特性\r\n    window.open('https://www.tentech.top', '_blank', windowFeatures);*/\r\n};\r\n\r\nonMounted(() => {\r\n  if (getAPIKey()) {\r\n    switchConfigStatus();\r\n  }\r\n});\r\n\r\nconst appendLastMessageContent = (content: string) =>\r\n    (messageList.value[messageList.value.length - 1].content += content);\r\nconst sendChatMessage = async (content: string = messageContent.value) => {\r\n  try {\r\n    isTalking.value = true;\r\n    if (messageList.value.length === 2) {\r\n      messageList.value.pop();\r\n    }\r\n    messageList.value.push({ role: \"user\", content });\r\n    clearMessageContent();\r\n    messageList.value.push({ role: \"assistant\", content: \"\" });\r\n\r\n    const { body, status } = await chat(messageList.value, getAPIKey());\r\n    if (body) {\r\n      const reader = body.getReader();\r\n      await readStream(reader, status);\r\n    }\r\n  } catch (error: any) {\r\n    appendLastMessageContent(error);\r\n  } finally {\r\n    isTalking.value = false;\r\n  }\r\n};\r\nconst readStream = async (\r\n    reader: ReadableStreamDefaultReader<Uint8Array>,\r\n    status: number\r\n) => {\r\n  let partialLine = \"\";\r\n\r\n  while (true) {\r\n    // eslint-disable-next-line no-await-in-loop\r\n    const { value, done } = await reader.read();\r\n    if (done) break;\r\n\r\n    const decodedText = decoder.decode(value, { stream: true });\r\n\r\n    if (status !== 200) {\r\n      const json = JSON.parse(decodedText); // start with \"data: \"\r\n      const content = json.error.message ?? decodedText;\r\n      appendLastMessageContent(content);\r\n      return;\r\n    }\r\n\r\n    const chunk = partialLine + decodedText;\r\n    const newLines = chunk.split(/\\r?\\n/);\r\n\r\n    partialLine = newLines.pop() ?? \"\";\r\n\r\n    for (const line of newLines) {\r\n      if (line.length === 0) continue; // ignore empty message\r\n      if (line.startsWith(\":\")) continue; // ignore sse comment message\r\n      if (line === \"data: [DONE]\") return; //\r\n\r\n      const json = JSON.parse(line.substring(6)); // start with \"data: \"\r\n      const content =\r\n          status === 200\r\n              ? json.choices[0].delta.content ?? \"\"\r\n              : json.error.message;\r\n      appendLastMessageContent(content);\r\n    }\r\n  }\r\n};\r\nconst sendOrSave = () => {\r\n  if (isStringAllSpaces(messageContent.value) ||messageContent.value.length===0 || isTalking===true ){\r\n    messageContent.value ='';\r\n    return;\r\n  }\r\n  if (isConfig.value) {\r\n    if (saveAPIKey(messageContent.value.trim())) {\r\n      switchConfigStatus();\r\n    }\r\n    clearMessageContent();\r\n  } else {\r\n    const content = messageContent.value.trim()\r\n    let index = isKeywordHit(content, keywords)\r\n    if (index !== -1) {\r\n      // 如果包含关键词\r\n      keywordsChat(index);\r\n    } else {\r\n      sendChatMessage();\r\n    }\r\n  }\r\n};\r\n\r\n\r\n//余弦相似度 处理英文\r\nfunction cosineSimilarity(str1, str2) {\r\n  // 将字符串转换为词语数组\r\n  const tokenize = (str) => str.toLowerCase().match(/\\w+/g) || [];\r\n\r\n  const tokens1 = tokenize(str1);\r\n  const tokens2 = tokenize(str2);\r\n\r\n  // 创建词频向量\r\n  const vector1 = {};\r\n  const vector2 = {};\r\n\r\n  tokens1.forEach((token) => {\r\n    vector1[token] = (vector1[token] || 0) + 1;\r\n  });\r\n\r\n  tokens2.forEach((token) => {\r\n    vector2[token] = (vector2[token] || 0) + 1;\r\n  });\r\n\r\n  // 计算余弦相似度\r\n  const dotProduct = Object.keys(vector1).reduce((acc, token) => {\r\n    return acc + (vector1[token] || 0) * (vector2[token] || 0);\r\n  }, 0);\r\n\r\n  const magnitude1 = Math.sqrt(Object.keys(vector1).reduce((acc, token) => {\r\n    return acc + Math.pow(vector1[token] || 0, 2);\r\n  }, 0));\r\n\r\n  const magnitude2 = Math.sqrt(Object.keys(vector2).reduce((acc, token) => {\r\n    return acc + Math.pow(vector2[token] || 0, 2);\r\n  }, 0));\r\n\r\n  if (magnitude1 === 0 || magnitude2 === 0) {\r\n    return 0;  // 处理零向量\r\n  }\r\n\r\n  return dotProduct / (magnitude1 * magnitude2);\r\n}\r\n\r\n\r\n//编辑距离相似度\r\nfunction similarity(str1, str2) {\r\n  const longer = str1.length > str2.length ? str1 : str2;\r\n  const shorter = str1.length > str2.length ? str2 : str1;\r\n  const longerLength = longer.length;\r\n  if (longerLength === 0) {\r\n    return 1.0;\r\n  }\r\n  const editDistance = new Array(longerLength + 1);\r\n  for (let i = 0; i <= longerLength; i++) {\r\n    editDistance[i] = new Array(shorter.length + 1);\r\n    editDistance[i][0] = i;\r\n  }\r\n  for (let j = 0; j <= shorter.length; j++) {\r\n    editDistance[0][j] = j;\r\n  }\r\n  for (let i = 1; i <= longerLength; i++) {\r\n    for (let j = 1; j <= shorter.length; j++) {\r\n      const cost = longer[i - 1] === shorter[j - 1] ? 0 : 1;\r\n      editDistance[i][j] = Math.min(\r\n          editDistance[i - 1][j] + 1,\r\n          editDistance[i][j - 1] + 1,\r\n          editDistance[i - 1][j - 1] + cost\r\n      );\r\n    }\r\n  }\r\n  const maxLen = Math.max(str1.length, str2.length);\r\n  const editDistanceValue = editDistance[longerLength][shorter.length];\r\n  const similarity = (1.0 - editDistanceValue / maxLen);\r\n  return similarity;\r\n}\r\nfunction isKeywordHit(content) {\r\n  let keywordsArray = keywords;\r\n  const matchingIndices = [];\r\n  let matchingIndicesMap = new Map()\r\n  for (let i = 0; i < keywordsArray.length; i++) {\r\n    const keywords = keywordsArray[i];\r\n    const similarities = keywords.map(keyword => similarity(content, keyword));\r\n    const maxSimilarity = Math.max(...similarities);\r\n    if (maxSimilarity >= similarThreshold) {\r\n      matchingIndices.push(i);\r\n      matchingIndicesMap.set(i,maxSimilarity)\r\n    }\r\n  }\r\n  if (matchingIndices.length > 0) {\r\n    let maxSimilarityIndex = -1;\r\n    let maxSimilarityValue = -1;\r\n    matchingIndicesMap.forEach((similarityValue, index) => {\r\n      if (similarityValue > maxSimilarityValue) {\r\n        maxSimilarityValue = similarityValue;\r\n        maxSimilarityIndex = index;\r\n      }\r\n    });\r\n    return maxSimilarityIndex;\r\n  } else {\r\n    return -1;\r\n  }\r\n}\r\n\r\nfunction keywordsChat(index){\r\n  let content = \"\"\r\n  content = messageContent.value\r\n  isTalking.value = true;\r\n  if (messageList.value.length === 2) {\r\n    messageList.value.pop();\r\n  }\r\n  messageList.value.push({ role: \"user\", content });\r\n  clearMessageContent();\r\n  let message = \"\"\r\n  if (keywordsArray.keywordsMap.get(index)){\r\n    message = keywordsArray.keywordsMap.get(index).message\r\n  }\r\n  messageList.value.push({ role: \"assistant\", content: \"\" });\r\n\r\n  const messageChunks = message.split(\"\"); // 拆分消息成字符数组\r\n  let currentIndex = 0;\r\n\r\n  /*流式输出*/\r\n  const addMessage = () => {\r\n    if (currentIndex < messageChunks.length) {\r\n      messageList.value[messageList.value.length-1].content += messageChunks[currentIndex];\r\n      currentIndex++;\r\n      if (currentIndex < messageChunks.length) {\r\n        setTimeout(addMessage, 20); // 每隔1秒添加下一个字符\r\n      } else {\r\n        isTalking.value = false;\r\n      }\r\n    }\r\n  };\r\n  // 开始添加消息字符\r\n  addMessage();\r\n}\r\n\r\nconst saveAPIKey = (apiKey: string) => {\r\n  if (apiKey.slice(0, 3) !== \"sk-\" || apiKey.length !== 51) {\r\n    alert(\"API Key 错误，请检查后重新输入！\");\r\n    return false;\r\n  }\r\n  const aesAPIKey = cryptoJS.AES.encrypt(apiKey, getSecretKey()).toString();\r\n  localStorage.setItem(\"apiKey\", aesAPIKey);\r\n  return true;\r\n};\r\nconst getAPIKey = () => {\r\n  if (apiKey) return apiKey;\r\n  const aesAPIKey = localStorage.getItem(\"apiKey\") ?? \"\";\r\n  apiKey = cryptoJS.AES.decrypt(aesAPIKey, getSecretKey()).toString(\r\n      cryptoJS.enc.Utf8\r\n  );\r\n  return apiKey;\r\n};\r\nconst getSecretKey = () => \"lianginx\";\r\nconst switchConfigStatus = () => (isConfig.value = !isConfig.value);\r\nconst clearMessageContent = () => (messageContent.value = \"\");\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (!whiteList.value.includes(_unref(route).path))\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        (!isShowChatWindows.value)\n          ? (_openBlock(), _createElementBlock(\"div\", {\n              key: 0,\n              class: \"root-page\",\n              onMouseleave: _cache[0] || (_cache[0] = ($event: any) => (isMouseOver.value=false)),\n              onMouseover: _cache[1] || (_cache[1] = ($event: any) => (isMouseOver.value=true)),\n              onClick: _cache[2] || (_cache[2] = ($event: any) => (isShowChatWindows.value = true))\n            }, _hoisted_3, 32))\n          : _createCommentVNode(\"\", true),\n        (!isShowChatWindows.value)\n          ? (_openBlock(), _createElementBlock(\"div\", {\n              key: 1,\n              class: _normalizeClass([\"card-container\", {hoverCard:isMouseOver.value}]),\n              onMouseleave: _cache[3] || (_cache[3] = ($event: any) => (isMouseOver.value=false)),\n              onMouseover: _cache[4] || (_cache[4] = ($event: any) => (isMouseOver.value=true))\n            }, [\n              _createElementVNode(\"div\", { class: \"card\" }, [\n                _hoisted_4,\n                _createElementVNode(\"div\", {\n                  class: \"card-item more-contact\",\n                  onClick: gotoTargetPage\n                }, _hoisted_10)\n              ]),\n              _hoisted_11\n            ], 34))\n          : _createCommentVNode(\"\", true),\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"chat-windows\", {'show-chat-windows':isShowChatWindows.value}])\n        }, [\n          _createElementVNode(\"div\", _hoisted_12, [\n            _hoisted_13,\n            _createElementVNode(\"div\", {\n              class: \"close-button\",\n              onClick: _cache[5] || (_cache[5] = ($event: any) => {isShowChatWindows.value=false;isMouseOver.value=false})\n            }, _hoisted_15)\n          ]),\n          _createElementVNode(\"div\", {\n            class: \"chat-message-container\",\n            ref_key: \"chatListDom\",\n            ref: chatListDom\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(messageList.value.filter((v) => v.role !== 'system'), (item) => {\n              return (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                (item.role === 'user')\n                  ? (_openBlock(), _createElementBlock(\"div\", {\n                      key: 0,\n                      class: _normalizeClass([\"user-message-content\", item.role === 'user'? 'user-message':'service-message'])\n                    }, [\n                      (item.content)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"user-message-item\",\n                            innerHTML: _unref(md).render(item.content)\n                          }, null, 8, _hoisted_17))\n                        : _createCommentVNode(\"\", true),\n                      _hoisted_18\n                    ], 2))\n                  : _createCommentVNode(\"\", true),\n                (item.role !== 'user')\n                  ? (_openBlock(), _createElementBlock(\"div\", {\n                      key: 1,\n                      class: _normalizeClass([\"user-message-content\", item.role === 'user'? 'user-message':'service-message'])\n                    }, [\n                      _hoisted_19,\n                      (item.content)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"no-user-message-item\",\n                            innerHTML: getHtml(item.content)\n                          }, null, 8, _hoisted_20))\n                        : _createCommentVNode(\"\", true)\n                    ], 2))\n                  : _createCommentVNode(\"\", true)\n              ]))\n            }), 256))\n          ], 512),\n          _createElementVNode(\"div\", _hoisted_21, [\n            _hoisted_22,\n            _createElementVNode(\"div\", _hoisted_23, [\n              _withDirectives(_createElementVNode(\"textarea\", {\n                class: \"message-input\",\n                placeholder: \"很高兴为您服务，请输入您的问题\",\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => (_isRef(messageContent) ? (messageContent).value = $event : messageContent = $event)),\n                onKeydown: _cache[7] || (_cache[7] = _withKeys(($event: any) => (_unref(isTalking) || sendOrSave()), [\"enter\"]))\n              }, null, 544), [\n                [_vModelText, _unref(messageContent)]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_24, [\n              _createElementVNode(\"div\", {\n                class: _normalizeClass([\"send-message-button\", {available:getAvailableButton()}]),\n                onClick: _cache[8] || (_cache[8] = ($event: any) => (sendOrSave()))\n              }, \" 发送 \", 2)\n            ])\n          ])\n        ], 2)\n      ]))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})"
        ],
        "mappings": "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",
        "names": [
          "similarity",
          "keywordsArray",
          "keywords",
          "apiKey"
        ]
      }
    },
    {
      "name": "vite:json",
      "start": 1699633499625,
      "end": 1699633499625,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1699633499625,
      "end": 1699633499625,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "start": 1699633499625,
      "end": 1699633499625,
      "order": "normal"
    },
    {
      "name": "vite:vue-jsx",
      "start": 1699633499625,
      "end": 1699633499625,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1699633499625,
      "end": 1699633499626,
      "order": "normal"
    },
    {
      "name": "nuxt:remove-plugin-metadata",
      "start": 1699633499626,
      "end": 1699633499626,
      "order": "normal"
    },
    {
      "name": "nuxt:chunk-error",
      "start": 1699633499626,
      "end": 1699633499626,
      "order": "normal"
    },
    {
      "name": "nuxt:components:imports",
      "start": 1699633499626,
      "end": 1699633499626,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1699633499626,
      "end": 1699633499626,
      "order": "normal"
    },
    {
      "name": "ssr-styles",
      "start": 1699633499626,
      "end": 1699633499626,
      "order": "normal"
    },
    {
      "name": "vite:define",
      "start": 1699633499626,
      "end": 1699633499626,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1699633499626,
      "end": 1699633499626,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1699633499626,
      "end": 1699633499626,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1699633499627,
      "end": 1699633499627,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1699633499627,
      "end": 1699633499627,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1699633499627,
      "end": 1699633499627,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1699633499627,
      "end": 1699633499627,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1699633499627,
      "end": 1699633499627,
      "order": "normal"
    },
    {
      "name": "nuxt:composable-keys",
      "start": 1699633499627,
      "end": 1699633499627,
      "order": "post"
    },
    {
      "name": "nuxt:imports-transform",
      "start": 1699633499627,
      "end": 1699633499632,
      "order": "post"
    },
    {
      "name": "unctx:transform",
      "start": 1699633499632,
      "end": 1699633499632,
      "order": "post"
    },
    {
      "name": "nuxt:pages-macros-transform",
      "start": 1699633499632,
      "end": 1699633499632,
      "order": "post"
    },
    {
      "name": "nuxt:runtime-paths-dep",
      "start": 1699633499632,
      "end": 1699633499632,
      "order": "post"
    },
    {
      "name": "nuxt:route-injection-plugin",
      "start": 1699633499632,
      "end": 1699633499632,
      "order": "post"
    },
    {
      "name": "nuxt:components-loader",
      "start": 1699633499632,
      "end": 1699633499632,
      "order": "post"
    },
    {
      "name": "nuxt:tree-shake-composables:transform",
      "start": 1699633499632,
      "end": 1699633499633,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1699633499633,
      "end": 1699633499633,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1699633499633,
      "end": 1699633499633,
      "order": "normal"
    }
  ]
}
